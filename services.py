# services.py

# Полный прайс-лист на основе файла "СМЕТА образец.docx"
# Структура: Ключ -> {Название, Ед.изм, Цена}

PRICE_LIST = {
    # --- БАЗОВЫЕ КОМПОНЕНТЫ ---
    "delivery_fix": {"name": "Транспортные расходы (доставка оборудования и бригады)", "unit": "усл.", "price": 13000},
    "montage_base": {"name": "Монтаж станции (Стандартный комплекс)", "unit": "усл.", "price": 39000},
    # Цена может меняться от модели

    # --- ТРУБОПРОВОД (Зависит от грунта) ---
    # Цены включают работу + материал
    "pipe_laying_sand": {"name": "Прокладка трубы 110мм (Песок, до 1м)", "unit": "м.п.", "price": 940},
    "pipe_laying_clay": {"name": "Прокладка трубы 110мм (Глина, до 1м)", "unit": "м.п.", "price": 1145},
    "pipe_laying_clay_deep": {"name": "Прокладка трубы 110мм (Глина, до 1.6м)", "unit": "м.п.", "price": 1525},

    # --- ЭЛЕКТРИКА ---
    "cable_laying": {"name": "Прокладка эл. кабеля ПВС 3x1,5 в черной гофре", "unit": "м.п.", "price": 375},
    "socket_install": {"name": "Установка влагозащитной розетки", "unit": "шт.", "price": 1110},
    "heating_cable": {"name": "Саморегулирующийся греющий кабель", "unit": "м.п.", "price": 1320},

    # --- СПЕЦ. РАБОТЫ (Алмазное бурение и проколы) ---
    "diamond_drilling_40": {"name": "Алмазное бурение фундамента (до 40 см)", "unit": "отв.", "price": 6000},
    "diamond_drilling_60": {"name": "Алмазное бурение фундамента (до 60 см)", "unit": "отв.", "price": 8000},
    "hole_in_ring": {"name": "Прокол ж/б кольца под трубу 110мм", "unit": "шт.", "price": 950},
    "shakhtersky_podkop": {"name": "«Шахтерский подкоп» (отсутствие подполья)", "unit": "м.п.", "price": 5000},

    # --- ЗЕМЛЯНЫЕ РАБОТЫ (Ручной труд) ---
    "manual_sand_transport": {"name": "Подвоз песка вручную (более 10м)", "unit": "м3", "price": 1000},
    "manual_soil_transport": {"name": "Вывоз/перемещение грунта вручную (до 25м)", "unit": "м3", "price": 1700},
    "soil_loading": {"name": "Погрузка грунта в самосвал", "unit": "м3", "price": 3500},

    # --- ОПАЛУБКА (Сложные грунты) ---
    "opalubka_t4": {"name": "Изготовление опалубки (Плывун, Т4-Т9)", "unit": "шт.", "price": 19900},

    # --- ШТРАФЫ И ПРОЧЕЕ ---
    "false_call": {"name": "Ложный выезд бригады (нет условий)", "unit": "шт.", "price": 5000},
}


def get_pipe_service(soil_type, depth_meters=1.0):
    """Помогает выбрать правильную цену трубы"""
    if soil_type == 'clay':
        # Если глубина больше метра, берем дорогой тариф
        if depth_meters > 1.0:
            return PRICE_LIST["pipe_laying_clay_deep"]
        return PRICE_LIST["pipe_laying_clay"]
    else:
        # Для песка считаем стандарт (до 1м)
        return PRICE_LIST["pipe_laying_sand"]

